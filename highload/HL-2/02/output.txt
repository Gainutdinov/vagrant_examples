Задание:
1. Создайте ВМ следующей конфигурации:
○ 1 CPU
○ 1G memory
2. Обновите систему на созданной ВМ.

```
root@cpu1:~# apt upgrade
root@cpu1:~# apt upgrade
Reading package lists... Done
Building dependency tree
Reading state information... Done
Calculating upgrade... Done
The following NEW packages will be installed:
  libfwupdplugin5 libmbim-glib4 libmbim-proxy libmm-glib0 libqmi-glib5 libqmi-proxy linux-cloud-tools-5.4.0-105 linux-cloud-tools-5.4.0-105-generic linux-headers-5.4.0-105 linux-headers-5.4.0-105-generic
  linux-image-5.4.0-105-generic linux-modules-5.4.0-105-generic linux-modules-extra-5.4.0-105-generic modemmanager usb-modeswitch usb-modeswitch-data
The following packages will be upgraded:
  alsa-ucm-conf bind9-dnsutils bind9-host bind9-libs command-not-found fwupd fwupd-signed language-pack-gnome-en language-pack-gnome-en-base libdrm-common libdrm2 libexpat1 libfwupd2 libjcat1 libnetplan0
  libssl1.1 libxml2 linux-cloud-tools-common linux-cloud-tools-generic linux-cloud-tools-virtual linux-firmware linux-generic linux-headers-generic linux-image-generic linux-tools-common netplan.io openssl
  python3-commandnotfound sosreport tar tzdata
31 upgraded, 16 newly installed, 0 to remove and 0 not upgraded.
18 standard security updates
Need to get 212 MB of archives.
After this operation, 424 MB of additional disk space will be used.
Do you want to continue? [Y/n] Y
Get:1 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 tar amd64 1.30+dfsg-7ubuntu0.20.04.2 [240 kB]
Get:2 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 language-pack-gnome-en all 1:20.04+20220211 [1928 B]
Get:3 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 language-pack-gnome-en-base all 1:20.04+20220211 [533 kB]
Get:4 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libexpat1 amd64 2.2.9-1ubuntu0.4 [74.4 kB]
Get:5 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libnetplan0 amd64 0.103-0ubuntu5~20.04.6 [53.4 kB]
Get:6 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libssl1.1 amd64 1.1.1f-1ubuntu2.12 [1322 kB]
Get:7 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libxml2 amd64 2.9.10+dfsg-5ubuntu0.20.04.2 [640 kB]
Get:8 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 netplan.io amd64 0.103-0ubuntu5~20.04.6 [125 kB]
Get:9 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 openssl amd64 1.1.1f-1ubuntu2.12 [620 kB]
Get:10 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 tzdata all 2022a-0ubuntu0.20.04 [294 kB]
Get:11 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 bind9-dnsutils amd64 1:9.16.1-0ubuntu2.10 [134 kB]
Get:12 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 bind9-libs amd64 1:9.16.1-0ubuntu2.10 [1108 kB]
Get:13 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 bind9-host amd64 1:9.16.1-0ubuntu2.10 [42.9 kB]
Get:14 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 command-not-found all 20.04.6 [5264 B]
Get:15 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 python3-commandnotfound all 20.04.6 [10.4 kB]
Get:16 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libdrm-common all 2.4.107-8ubuntu1~20.04.2 [5396 B]
Get:17 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libdrm2 amd64 2.4.107-8ubuntu1~20.04.2 [34.1 kB]
Get:18 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 alsa-ucm-conf all 1.2.2-1ubuntu0.12 [27.1 kB]
Get:19 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 fwupd-signed amd64 1.27.1ubuntu7+1.2-2~20.04.1 [26.4 kB]
Get:20 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libjcat1 amd64 0.1.4-0ubuntu0.20.04.1 [25.9 kB]
Get:21 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libfwupd2 amd64 1.7.5-3~20.04.1 [91.7 kB]
Get:22 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libfwupdplugin5 amd64 1.7.5-3~20.04.1 [169 kB]
Get:23 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libmm-glib0 amd64 1.16.6-2~20.04.1 [188 kB]
Get:24 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libmbim-glib4 amd64 1.24.8-1~20.04 [103 kB]
Get:25 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libmbim-proxy amd64 1.24.8-1~20.04 [5984 B]
Get:26 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libqmi-glib5 amd64 1.28.6-1~20.04.1 [613 kB]
Get:27 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libqmi-proxy amd64 1.28.6-1~20.04.1 [5896 B]
Get:28 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 fwupd amd64 1.7.5-3~20.04.1 [2423 kB]
Get:29 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-cloud-tools-common all 5.4.0-105.119 [56.1 kB]
Get:30 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-cloud-tools-5.4.0-105 amd64 5.4.0-105.119 [66.5 kB]
Get:31 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-cloud-tools-5.4.0-105-generic amd64 5.4.0-105.119 [1868 B]
Get:32 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-cloud-tools-generic amd64 5.4.0.105.109 [2360 B]
Get:33 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-cloud-tools-virtual amd64 5.4.0.105.109 [2384 B]
Get:34 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-firmware all 1.187.29 [125 MB]
Get:35 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-modules-5.4.0-105-generic amd64 5.4.0-105.119 [14.8 MB]
Get:36 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-image-5.4.0-105-generic amd64 5.4.0-105.119 [10.5 MB]
Get:37 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-modules-extra-5.4.0-105-generic amd64 5.4.0-105.119 [39.4 MB]
Get:38 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-generic amd64 5.4.0.105.109 [1904 B]
Get:39 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-image-generic amd64 5.4.0.105.109 [2468 B]
Get:40 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-headers-5.4.0-105 all 5.4.0-105.119 [11.0 MB]
Get:41 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-headers-5.4.0-105-generic amd64 5.4.0-105.119 [1399 kB]
Get:42 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-headers-generic amd64 5.4.0.105.109 [2344 B]
Get:43 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-tools-common all 5.4.0-105.119 [206 kB]
Get:44 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 modemmanager amd64 1.16.6-2~20.04.1 [824 kB]
Get:45 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 sosreport amd64 4.3-1ubuntu0.20.04.1 [294 kB]
Get:46 http://us.archive.ubuntu.com/ubuntu focal/main amd64 usb-modeswitch-data all 20191128-3 [32.3 kB]
Get:47 http://us.archive.ubuntu.com/ubuntu focal/main amd64 usb-modeswitch amd64 2.5.2+repack0-2ubuntu3 [53.1 kB]
Fetched 212 MB in 43s (4991 kB/s)
Extracting templates from packages: 100%
Preconfiguring packages ...
(Reading database ... 111328 files and directories currently installed.)
Preparing to unpack .../tar_1.30+dfsg-7ubuntu0.20.04.2_amd64.deb ...
Unpacking tar (1.30+dfsg-7ubuntu0.20.04.2) over (1.30+dfsg-7ubuntu0.20.04.1) ...
Setting up tar (1.30+dfsg-7ubuntu0.20.04.2) ...
(Reading database ... 111328 files and directories currently installed.)
Preparing to unpack .../00-language-pack-gnome-en_1%3a20.04+20220211_all.deb ...
Unpacking language-pack-gnome-en (1:20.04+20220211) over (1:20.04+20210802) ...
Preparing to unpack .../01-language-pack-gnome-en-base_1%3a20.04+20220211_all.deb ...
Unpacking language-pack-gnome-en-base (1:20.04+20220211) over (1:20.04+20210802) ...
Preparing to unpack .../02-libexpat1_2.2.9-1ubuntu0.4_amd64.deb ...
Unpacking libexpat1:amd64 (2.2.9-1ubuntu0.4) over (2.2.9-1ubuntu0.2) ...
Preparing to unpack .../03-libnetplan0_0.103-0ubuntu5~20.04.6_amd64.deb ...
Unpacking libnetplan0:amd64 (0.103-0ubuntu5~20.04.6) over (0.103-0ubuntu5~20.04.5) ...
Preparing to unpack .../04-libssl1.1_1.1.1f-1ubuntu2.12_amd64.deb ...
Unpacking libssl1.1:amd64 (1.1.1f-1ubuntu2.12) over (1.1.1f-1ubuntu2.11) ...
Preparing to unpack .../05-libxml2_2.9.10+dfsg-5ubuntu0.20.04.2_amd64.deb ...
Unpacking libxml2:amd64 (2.9.10+dfsg-5ubuntu0.20.04.2) over (2.9.10+dfsg-5ubuntu0.20.04.1) ...
Preparing to unpack .../06-netplan.io_0.103-0ubuntu5~20.04.6_amd64.deb ...
Unpacking netplan.io (0.103-0ubuntu5~20.04.6) over (0.103-0ubuntu5~20.04.5) ...
Preparing to unpack .../07-openssl_1.1.1f-1ubuntu2.12_amd64.deb ...
Unpacking openssl (1.1.1f-1ubuntu2.12) over (1.1.1f-1ubuntu2.11) ...
Preparing to unpack .../08-tzdata_2022a-0ubuntu0.20.04_all.deb ...
Unpacking tzdata (2022a-0ubuntu0.20.04) over (2021e-0ubuntu0.20.04) ...
Preparing to unpack .../09-bind9-dnsutils_1%3a9.16.1-0ubuntu2.10_amd64.deb ...
Unpacking bind9-dnsutils (1:9.16.1-0ubuntu2.10) over (1:9.16.1-0ubuntu2.9) ...
Preparing to unpack .../10-bind9-libs_1%3a9.16.1-0ubuntu2.10_amd64.deb ...
Unpacking bind9-libs:amd64 (1:9.16.1-0ubuntu2.10) over (1:9.16.1-0ubuntu2.9) ...
Preparing to unpack .../11-bind9-host_1%3a9.16.1-0ubuntu2.10_amd64.deb ...
Unpacking bind9-host (1:9.16.1-0ubuntu2.10) over (1:9.16.1-0ubuntu2.9) ...
Preparing to unpack .../12-command-not-found_20.04.6_all.deb ...
Unpacking command-not-found (20.04.6) over (20.04.5) ...
Preparing to unpack .../13-python3-commandnotfound_20.04.6_all.deb ...
Unpacking python3-commandnotfound (20.04.6) over (20.04.5) ...
Preparing to unpack .../14-libdrm-common_2.4.107-8ubuntu1~20.04.2_all.deb ...
Unpacking libdrm-common (2.4.107-8ubuntu1~20.04.2) over (2.4.107-8ubuntu1~20.04.1) ...
Preparing to unpack .../15-libdrm2_2.4.107-8ubuntu1~20.04.2_amd64.deb ...
Unpacking libdrm2:amd64 (2.4.107-8ubuntu1~20.04.2) over (2.4.107-8ubuntu1~20.04.1) ...
Preparing to unpack .../16-alsa-ucm-conf_1.2.2-1ubuntu0.12_all.deb ...
Unpacking alsa-ucm-conf (1.2.2-1ubuntu0.12) over (1.2.2-1ubuntu0.11) ...
Preparing to unpack .../17-fwupd-signed_1.27.1ubuntu7+1.2-2~20.04.1_amd64.deb ...
Unpacking fwupd-signed (1.27.1ubuntu7+1.2-2~20.04.1) over (1.27.1ubuntu5+1.5.11-0ubuntu1~20.04.2) ...
Preparing to unpack .../18-libjcat1_0.1.4-0ubuntu0.20.04.1_amd64.deb ...
Unpacking libjcat1:amd64 (0.1.4-0ubuntu0.20.04.1) over (0.1.3-2~ubuntu20.04.1) ...
Preparing to unpack .../19-libfwupd2_1.7.5-3~20.04.1_amd64.deb ...
Unpacking libfwupd2:amd64 (1.7.5-3~20.04.1) over (1.5.11-0ubuntu1~20.04.2) ...
Selecting previously unselected package libfwupdplugin5:amd64.
Preparing to unpack .../20-libfwupdplugin5_1.7.5-3~20.04.1_amd64.deb ...
Unpacking libfwupdplugin5:amd64 (1.7.5-3~20.04.1) ...
Selecting previously unselected package libmm-glib0:amd64.
Preparing to unpack .../21-libmm-glib0_1.16.6-2~20.04.1_amd64.deb ...
Unpacking libmm-glib0:amd64 (1.16.6-2~20.04.1) ...
Selecting previously unselected package libmbim-glib4:amd64.
Preparing to unpack .../22-libmbim-glib4_1.24.8-1~20.04_amd64.deb ...
Unpacking libmbim-glib4:amd64 (1.24.8-1~20.04) ...
Selecting previously unselected package libmbim-proxy.
Preparing to unpack .../23-libmbim-proxy_1.24.8-1~20.04_amd64.deb ...
Unpacking libmbim-proxy (1.24.8-1~20.04) ...
Selecting previously unselected package libqmi-glib5:amd64.
Preparing to unpack .../24-libqmi-glib5_1.28.6-1~20.04.1_amd64.deb ...
Unpacking libqmi-glib5:amd64 (1.28.6-1~20.04.1) ...
Selecting previously unselected package libqmi-proxy.
Preparing to unpack .../25-libqmi-proxy_1.28.6-1~20.04.1_amd64.deb ...
Unpacking libqmi-proxy (1.28.6-1~20.04.1) ...
Preparing to unpack .../26-fwupd_1.7.5-3~20.04.1_amd64.deb ...
Unpacking fwupd (1.7.5-3~20.04.1) over (1.5.11-0ubuntu1~20.04.2) ...
Preparing to unpack .../27-linux-cloud-tools-common_5.4.0-105.119_all.deb ...
Unpacking linux-cloud-tools-common (5.4.0-105.119) over (5.4.0-104.118) ...
Selecting previously unselected package linux-cloud-tools-5.4.0-105.
Preparing to unpack .../28-linux-cloud-tools-5.4.0-105_5.4.0-105.119_amd64.deb ...
Unpacking linux-cloud-tools-5.4.0-105 (5.4.0-105.119) ...
Selecting previously unselected package linux-cloud-tools-5.4.0-105-generic.
Preparing to unpack .../29-linux-cloud-tools-5.4.0-105-generic_5.4.0-105.119_amd64.deb ...
Unpacking linux-cloud-tools-5.4.0-105-generic (5.4.0-105.119) ...
Preparing to unpack .../30-linux-cloud-tools-generic_5.4.0.105.109_amd64.deb ...
Unpacking linux-cloud-tools-generic (5.4.0.105.109) over (5.4.0.104.108) ...
Preparing to unpack .../31-linux-cloud-tools-virtual_5.4.0.105.109_amd64.deb ...
Unpacking linux-cloud-tools-virtual (5.4.0.105.109) over (5.4.0.104.108) ...
Preparing to unpack .../32-linux-firmware_1.187.29_all.deb ...
Unpacking linux-firmware (1.187.29) over (1.187.27) ...
Selecting previously unselected package linux-modules-5.4.0-105-generic.
Preparing to unpack .../33-linux-modules-5.4.0-105-generic_5.4.0-105.119_amd64.deb ...
Unpacking linux-modules-5.4.0-105-generic (5.4.0-105.119) ...
Selecting previously unselected package linux-image-5.4.0-105-generic.
Preparing to unpack .../34-linux-image-5.4.0-105-generic_5.4.0-105.119_amd64.deb ...
Unpacking linux-image-5.4.0-105-generic (5.4.0-105.119) ...
Selecting previously unselected package linux-modules-extra-5.4.0-105-generic.
Preparing to unpack .../35-linux-modules-extra-5.4.0-105-generic_5.4.0-105.119_amd64.deb ...
Unpacking linux-modules-extra-5.4.0-105-generic (5.4.0-105.119) ...
Preparing to unpack .../36-linux-generic_5.4.0.105.109_amd64.deb ...
Unpacking linux-generic (5.4.0.105.109) over (5.4.0.104.108) ...
Preparing to unpack .../37-linux-image-generic_5.4.0.105.109_amd64.deb ...
Unpacking linux-image-generic (5.4.0.105.109) over (5.4.0.104.108) ...
Selecting previously unselected package linux-headers-5.4.0-105.
Preparing to unpack .../38-linux-headers-5.4.0-105_5.4.0-105.119_all.deb ...
Unpacking linux-headers-5.4.0-105 (5.4.0-105.119) ...
Selecting previously unselected package linux-headers-5.4.0-105-generic.
Preparing to unpack .../39-linux-headers-5.4.0-105-generic_5.4.0-105.119_amd64.deb ...
Unpacking linux-headers-5.4.0-105-generic (5.4.0-105.119) ...
Preparing to unpack .../40-linux-headers-generic_5.4.0.105.109_amd64.deb ...
Unpacking linux-headers-generic (5.4.0.105.109) over (5.4.0.104.108) ...
Preparing to unpack .../41-linux-tools-common_5.4.0-105.119_all.deb ...
Unpacking linux-tools-common (5.4.0-105.119) over (5.4.0-104.118) ...
Selecting previously unselected package modemmanager.
Preparing to unpack .../42-modemmanager_1.16.6-2~20.04.1_amd64.deb ...
Unpacking modemmanager (1.16.6-2~20.04.1) ...
Preparing to unpack .../43-sosreport_4.3-1ubuntu0.20.04.1_amd64.deb ...
Unpacking sosreport (4.3-1ubuntu0.20.04.1) over (4.2-1ubuntu0.20.04.1) ...
Selecting previously unselected package usb-modeswitch-data.
Preparing to unpack .../44-usb-modeswitch-data_20191128-3_all.deb ...
Unpacking usb-modeswitch-data (20191128-3) ...
Selecting previously unselected package usb-modeswitch.
Preparing to unpack .../45-usb-modeswitch_2.5.2+repack0-2ubuntu3_amd64.deb ...
Unpacking usb-modeswitch (2.5.2+repack0-2ubuntu3) ...
Setting up libexpat1:amd64 (2.2.9-1ubuntu0.4) ...
Setting up alsa-ucm-conf (1.2.2-1ubuntu0.12) ...
Setting up linux-firmware (1.187.29) ...
update-initramfs: Generating /boot/initrd.img-5.4.0-104-generic
update-initramfs: Generating /boot/initrd.img-5.4.0-42-generic
Setting up libssl1.1:amd64 (1.1.1f-1ubuntu2.12) ...
Setting up libnetplan0:amd64 (0.103-0ubuntu5~20.04.6) ...
Setting up fwupd-signed (1.27.1ubuntu7+1.2-2~20.04.1) ...
Setting up linux-cloud-tools-common (5.4.0-105.119) ...
A dependency job for hv-kvp-daemon.service failed. See 'journalctl -xe' for details.
Setting up linux-headers-5.4.0-105 (5.4.0-105.119) ...
Setting up libjcat1:amd64 (0.1.4-0ubuntu0.20.04.1) ...
Setting up netplan.io (0.103-0ubuntu5~20.04.6) ...
Setting up tzdata (2022a-0ubuntu0.20.04) ...

Current default time zone: 'Etc/UTC'
Local time is now:      Mon Mar 28 08:45:18 UTC 2022.
Universal Time is now:  Mon Mar 28 08:45:18 UTC 2022.
Run 'dpkg-reconfigure tzdata' if you wish to change it.

Setting up linux-cloud-tools-5.4.0-105 (5.4.0-105.119) ...
Setting up python3-commandnotfound (20.04.6) ...
Setting up usb-modeswitch-data (20191128-3) ...
Setting up sosreport (4.3-1ubuntu0.20.04.1) ...
Installing new version of config file /etc/sos/sos.conf ...
Setting up libmm-glib0:amd64 (1.16.6-2~20.04.1) ...
Setting up linux-cloud-tools-5.4.0-105-generic (5.4.0-105.119) ...
Setting up usb-modeswitch (2.5.2+repack0-2ubuntu3) ...
Setting up openssl (1.1.1f-1ubuntu2.12) ...
Setting up libdrm-common (2.4.107-8ubuntu1~20.04.2) ...
Setting up linux-tools-common (5.4.0-105.119) ...
Setting up linux-modules-5.4.0-105-generic (5.4.0-105.119) ...
Setting up libxml2:amd64 (2.9.10+dfsg-5ubuntu0.20.04.2) ...
Setting up linux-headers-5.4.0-105-generic (5.4.0-105.119) ...
Setting up libmbim-glib4:amd64 (1.24.8-1~20.04) ...
Setting up linux-image-5.4.0-105-generic (5.4.0-105.119) ...
I: /boot/vmlinuz.old is now a symlink to vmlinuz-5.4.0-104-generic
I: /boot/initrd.img.old is now a symlink to initrd.img-5.4.0-104-generic
I: /boot/vmlinuz is now a symlink to vmlinuz-5.4.0-105-generic
I: /boot/initrd.img is now a symlink to initrd.img-5.4.0-105-generic
Setting up bind9-libs:amd64 (1:9.16.1-0ubuntu2.10) ...
Setting up libfwupd2:amd64 (1.7.5-3~20.04.1) ...
Setting up linux-headers-generic (5.4.0.105.109) ...
Setting up libmbim-proxy (1.24.8-1~20.04) ...
Setting up linux-cloud-tools-virtual (5.4.0.105.109) ...
Setting up command-not-found (20.04.6) ...
Setting up linux-cloud-tools-generic (5.4.0.105.109) ...
Setting up libdrm2:amd64 (2.4.107-8ubuntu1~20.04.2) ...
Setting up linux-modules-extra-5.4.0-105-generic (5.4.0-105.119) ...
Setting up bind9-host (1:9.16.1-0ubuntu2.10) ...
Setting up libfwupdplugin5:amd64 (1.7.5-3~20.04.1) ...
Setting up linux-image-generic (5.4.0.105.109) ...
Setting up linux-generic (5.4.0.105.109) ...
Setting up libqmi-glib5:amd64 (1.28.6-1~20.04.1) ...
Setting up bind9-dnsutils (1:9.16.1-0ubuntu2.10) ...
Setting up libqmi-proxy (1.28.6-1~20.04.1) ...
Setting up modemmanager (1.16.6-2~20.04.1) ...
Created symlink /etc/systemd/system/dbus-org.freedesktop.ModemManager1.service → /lib/systemd/system/ModemManager.service.
Created symlink /etc/systemd/system/multi-user.target.wants/ModemManager.service → /lib/systemd/system/ModemManager.service.
Setting up fwupd (1.7.5-3~20.04.1) ...
Installing new version of config file /etc/fwupd/daemon.conf ...
Installing new version of config file /etc/fwupd/redfish.conf ...
Installing new version of config file /etc/fwupd/remotes.d/lvfs-testing.conf ...
Installing new version of config file /etc/fwupd/uefi_capsule.conf ...
Installing new version of config file /etc/update-motd.d/85-fwupd ...
fwupd-offline-update.service is a disabled or a static unit not running, not starting it.
fwupd-refresh.service is a disabled or a static unit not running, not starting it.
fwupd.service is a disabled or a static unit not running, not starting it.
Setting up language-pack-gnome-en (1:20.04+20220211) ...
Setting up language-pack-gnome-en-base (1:20.04+20220211) ...
Processing triggers for mime-support (3.64ubuntu1) ...
Processing triggers for libc-bin (2.31-0ubuntu9.7) ...
Processing triggers for man-db (2.9.1-1) ...
Processing triggers for dbus (1.12.16-2ubuntu2.1) ...
Processing triggers for linux-image-5.4.0-105-generic (5.4.0-105.119) ...
/etc/kernel/postinst.d/initramfs-tools:
update-initramfs: Generating /boot/initrd.img-5.4.0-105-generic
/etc/kernel/postinst.d/zz-update-grub:
Sourcing file `/etc/default/grub'
Sourcing file `/etc/default/grub.d/init-select.cfg'
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-5.4.0-105-generic
Found initrd image: /boot/initrd.img-5.4.0-105-generic
Found linux image: /boot/vmlinuz-5.4.0-104-generic
Found initrd image: /boot/initrd.img-5.4.0-104-generic
Found linux image: /boot/vmlinuz-5.4.0-42-generic
Found initrd image: /boot/initrd.img-5.4.0-42-generic
done
root@cpu1:~#

```

3. Получите информацию об использовании памяти в системе с помощью команды free. В полученном результате найдите:
○ общий объем физической памяти;
○ объем памяти, доступный для старта новых процессов;
○ общий объем пространства SWAP;
○ используется ли SWAP и в каком объеме.

```
root@cpu1:~# free -h
              total        used        free      shared  buff/cache   available
Mem:          976Mi       116Mi       206Mi       0.0Ki       653Mi       695Mi
Swap:         1.9Gi       6.0Mi       1.9Gi
#total 976Mi
#available for new processes 695Mi
#swap total 1.9Gi
#in used SWAP 6.0Mi
```

4. Добавьте полученную информацию в отчет.
5. Получите информацию об использовании памяти в системе с помощью команды top. В полученном результате найдите:
○ общий объем физической памяти;
○ объем памяти, доступный для старта новых процессов;
○ общий объем пространства SWAP;
○ используется ли SWAP и в каком объеме.

```
root@cpu1:~# top -o +%MEM
top - 08:53:57 up 41 min,  1 user,  load average: 0.00, 0.05, 0.06
Tasks:  96 total,   1 running,  95 sleeping,   0 stopped,   0 zombie
%Cpu0  :  0.0 us,  0.4 sy,  0.0 ni, 99.6 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :    976.9 total,    204.4 free,    115.1 used,    657.5 buff/cache
MiB Swap:   1953.0 total,   1946.5 free,      6.5 used.    697.1 avail Mem
...
#Практически полностью совпадают с значениями от утилиты free
```

6. Добавьте полученную информацию в отчет.
7. Сравните данные полученные командой free с данными, полученными командой top. Совпадают ли значения параметров, перечисленных в пунктах 1 и 2? Добавьте результат сравнения в отчет.

```
#Практически полностью совпадают с значениями от утилиты free

```
8. Получите информацию об использовании памяти в системе с помощью команды vmstat с интервалом 3с. В полученном результате найдите:
○ объем активной памяти;
○ объем неактивной памяти;
○ используется ли SWAP и в каком объеме;
○ какова интенсивность работы со SWAP.

```
root@cpu1:~# vmstat 3 5 --unit m
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0      6    214      6    682    0    0   628  1100  114  909  2  2 95  0  0
 0  0      6    214      6    682    0    0     0    12   27   48  0  0 99  0  0
 0  0      6    214      6    682    0    0     0     0   20   41  0  0 100  0  0
 0  0      6    214      6    682    0    0     0     0   22   42  0  0 100  0  0
 0  0      6    214      6    682    0    0     0     0   20   40  0  0 100  0  0

#объем активной памяти - 114m
#объем неактивной памяти - 293m 
#используется ли SWAP и в каком объеме - 6m;
#какова интенсивность работы со SWAP - si(swapped in from disk per second), so (swapped to disk per second) - исходя из данных SWAP - 0m 

```

9. Добавьте полученную информацию в отчет.
10. Определите ТОП-5 процессов в системе, требующих наибольшее количество памяти, используя команду ps. Добавьте полученную информацию в отчет.

```
ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%mem  | head -n 6
```


11. Определите ТОП-5 процессов в системе, требующих наибольшее количество памяти, используя команду top. Добавьте полученную информацию в отчет.

```
root@cpu1:~# LINES=12 top -b -n 1 -o +%MEM -w
top - 09:11:23 up 58 min,  1 user,  load average: 0.00, 0.00, 0.00
Tasks:  95 total,   1 running,  94 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :    976.9 total,    181.1 free,    114.8 used,    680.9 buff/cache
MiB Swap:   1953.0 total,   1946.5 free,      6.5 used.    697.2 avail Mem

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
    460 root      rt   0  280196  17996   8204 S   0.0   1.8   0:00.40 multipathd
    677 root      20   0  110504  15036   9664 S   0.0   1.5   0:00.08 unattended-upgr
    561 root      20   0   31608  13884   7632 S   0.0   1.4   0:00.12 networkd-dispat
  22278 root      20   0  314432  11000   9292 S   0.0   1.1   0:00.05 ModemManager
      1 root      20   0  102968  10660   6344 S   0.0   1.1   0:02.09 systemd
```

12. Подготовьте скрипт, который будет увеличивать свое потребление памяти с течением времени. Сделайте так, чтобы OOM killer уничтожил его. Добавьте в отчет:
○ исходный текст скрипта;

```
#!/bin/bash

apt install stress-ng -y
swapoff -a
for ((i = 0 ; i < 100 ; i++)); do
  stress-ng --vm 1 --vm-bytes 5% -t 1h &> /dev/null &
  sleep 1
  free -h
done

echo 'kill redundant stress-ng processes'
pkill stress-ng

```

○ часть системого журнала, где показана работа OOM killer.

```
...

Mar 28 09:53:12 cpu1 kernel: [  37066]     0 37066    13571      238    73728        0         -1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37067]     0 37067    13570     1034    81920        0         -1000 stress-ng
Mar 28 09:53:12 cpu1 kernel: [  37069]     0 37069    13571      244    73728        0         -1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37071]     0 37071    14343      952    77824        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37072]     0 37072    14343      890    81920        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37077]     0 37077     8935      249    69632        0             0 stress-ng
Mar 28 09:53:12 cpu1 kernel: [  37084]     0 37084     8907       62    57344        0             0 stress-ng
Mar 28 09:53:12 cpu1 kernel: [  37086]     0 37086    13571      203    77824        0         -1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37088]     0 37088    13571      304    81920        0         -1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37089]     0 37089    21710     5583   122880        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37090]     0 37090    14327      984    90112        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37091]     0 37091    14378      411    86016        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37092]     0 37092    20276     6660   139264        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37093]     0 37093    22479     6448   131072        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37094]     0 37094    20960     7213   139264        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37095]     0 37095    21991     4230   118784        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37096]     0 37096     2837      141    45056        0             0 incremental_mem
Mar 28 09:53:12 cpu1 kernel: [  37097]     0 37097     2028       86    45056        0             0 sleep
Mar 28 09:53:12 cpu1 kernel: [  37098]     0 37098    20251     1446    94208        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: [  37099]     0 37099    13571      100    73728        0          1000 stress-ng-vm
Mar 28 09:53:12 cpu1 kernel: oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=/,mems_allowed=0,global_oom,task_memcg=/user.slice/user-1000.slice/session-9.scope,task=stress-ng-vm,pid=37094,uid=0
Mar 28 09:53:12 cpu1 kernel: Out of memory: Killed process 37094 (stress-ng-vm) total-vm:83840kB, anon-rss:28068kB, file-rss:740kB, shmem-rss:44kB, UID:0 pgtables:136kB oom_score_adj:1000
Mar 28 09:53:12 cpu1 kernel: oom_reaper: reaped process 37094 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:44kB
Mar 28 09:53:12 cpu1 stress-ng[37077]: invoked with 'stress-n' by user 0
Mar 28 09:53:12 cpu1 stress-ng[37077]: system: 'cpu1' Linux 5.4.0-104-generic #118-Ubuntu SMP Wed Mar 2 19:02:41 UTC 2022 x86_64
Mar 28 09:53:12 cpu1 stress-ng[37077]: memory (MB): total 976.87, free 58.11, shared 150.13, buffer 0.15, swap 0.00, free swap 0.00
Mar 28 09:53:13 cpu1 stress-ng[37084]: invoked with 'stress-n' by user 0
Mar 28 09:53:13 cpu1 stress-ng[37084]: system: 'cpu1' Linux 5.4.0-104-generic #118-Ubuntu SMP Wed Mar 2 19:02:41 UTC 2022 x86_64
Mar 28 09:53:13 cpu1 stress-ng[37084]: memory (MB): total 976.87, free 738.39, shared 53.28, buffer 0.64, swap 0.00, free swap 0.00
Mar 28 09:53:13 cpu1 stress-ng[36680]: memory (MB): total 976.87, free 696.02, shared 55.35, buffer 0.15, swap 0.00, free swap 0.00
Mar 28 09:53:43 cpu1 stress-ng[37142]: invoked with 'stress-n' by user 0

...

```

13. Ограничьте возможность потребления RAM через cgroups до 75%. Запустите скрипт-пожиратель заново. Что с ним произойдет?

Из логов ниже видим что OOM-killer "вступает в игру" раньше чем ранее т.к. черзе cgroups мы ограничили кол-во доступной памяти и "убивает" процессы раньше тем самым сам хост не остаётся совсем без ресурсов как это было без использования cgroups'ов ранее.


```
apt install cgroup-tools


# Create a group for memory named “slack_group”
cgcreate -g "memory:custom_oom"
# Specify memory limit to 1G for this group
cgset -r memory.limit_in_bytes=500M "custom_oom" #~75% от доступной памяти
# Launch slack application in this group
cgexec -g "memory:custom_oom" /root/incremental_memory_usage.sh
...
Mem:          976Mi       528Mi       287Mi        89Mi       161Mi       249Mi
Swap:            0B          0B          0B
              total        used        free      shared  buff/cache   available
Mem:          976Mi       532Mi       279Mi        91Mi       164Mi       242Mi
Swap:            0B          0B          0B
              total        used        free      shared  buff/cache   available
Mem:          976Mi       528Mi       279Mi        95Mi       169Mi       242Mi
Swap:            0B          0B          0B
              total        used        free      shared  buff/cache   available
Mem:          976Mi       529Mi       274Mi        97Mi       172Mi       238Mi
Swap:            0B          0B          0B

...
journalctl -xe -f
...
Mar 28 10:20:00 cpu1 stress-ng[38869]: memory (MB): total 976.87, free 278.12, shared 97.50, buffer 1.82, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39597 (stress-ng-vm) total-vm:68868kB, anon-rss:14980kB, file-rss:796kB, shmem-rss:28kB, UID:0 pgtables:108kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39597 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:28kB
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39576 (stress-ng-vm) total-vm:69316kB, anon-rss:15432kB, file-rss:716kB, shmem-rss:4kB, UID:0 pgtables:108kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39576 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:4kB
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39601 (stress-ng-vm) total-vm:72384kB, anon-rss:18432kB, file-rss:884kB, shmem-rss:16kB, UID:0 pgtables:116kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39601 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:16kB
Mar 28 10:20:00 cpu1 stress-ng[39390]: memory (MB): total 976.87, free 272.39, shared 97.50, buffer 1.82, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 stress-ng[38845]: memory (MB): total 976.87, free 270.17, shared 97.50, buffer 1.81, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39611 (stress-ng-vm) total-vm:86428kB, anon-rss:19224kB, file-rss:764kB, shmem-rss:20kB, UID:0 pgtables:124kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39611 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:20kB
Mar 28 10:20:00 cpu1 stress-ng[38666]: memory (MB): total 976.87, free 285.43, shared 97.50, buffer 1.84, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39608 (stress-ng-vm) total-vm:81204kB, anon-rss:18944kB, file-rss:820kB, shmem-rss:24kB, UID:0 pgtables:112kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39608 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:24kB
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39606 (stress-ng-vm) total-vm:89300kB, anon-rss:17876kB, file-rss:728kB, shmem-rss:52kB, UID:0 pgtables:112kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39606 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:52kB
Mar 28 10:20:00 cpu1 stress-ng[38892]: memory (MB): total 976.87, free 285.95, shared 97.50, buffer 1.82, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 stress-ng[38701]: memory (MB): total 976.87, free 269.96, shared 97.50, buffer 1.95, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 stress-ng[38661]: memory (MB): total 976.87, free 283.21, shared 97.50, buffer 1.95, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39618 (stress-ng-vm) total-vm:74900kB, anon-rss:20008kB, file-rss:804kB, shmem-rss:52kB, UID:0 pgtables:120kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39618 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:52kB
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39620 (stress-ng-vm) total-vm:72968kB, anon-rss:16836kB, file-rss:884kB, shmem-rss:24kB, UID:0 pgtables:116kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39620 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:24kB
Mar 28 10:20:00 cpu1 stress-ng[38646]: memory (MB): total 976.87, free 269.71, shared 97.50, buffer 1.85, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39625 (stress-ng-vm) total-vm:75972kB, anon-rss:16588kB, file-rss:880kB, shmem-rss:32kB, UID:0 pgtables:112kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39625 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:32kB
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39609 (stress-ng-vm) total-vm:83840kB, anon-rss:16516kB, file-rss:876kB, shmem-rss:36kB, UID:0 pgtables:108kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39609 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:36kB
Mar 28 10:20:00 cpu1 stress-ng[38656]: memory (MB): total 976.87, free 269.47, shared 97.50, buffer 1.93, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 stress-ng[38681]: memory (MB): total 976.87, free 269.47, shared 97.50, buffer 1.93, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 stress-ng[38641]: memory (MB): total 976.87, free 269.47, shared 97.50, buffer 1.91, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 stress-ng[38696]: memory (MB): total 976.87, free 269.47, shared 97.50, buffer 1.83, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 stress-ng[38686]: memory (MB): total 976.87, free 267.47, shared 97.50, buffer 1.83, swap 0.00, free swap 0.00
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39610 (stress-ng-vm) total-vm:69788kB, anon-rss:15736kB, file-rss:660kB, shmem-rss:56kB, UID:0 pgtables:108kB oom_score_adj:1000
Mar 28 10:20:00 cpu1 kernel: oom_reaper: reaped process 39610 (stress-ng-vm), now anon-rss:0kB, file-rss:0kB, shmem-rss:56kB
Mar 28 10:20:00 cpu1 kernel: Memory cgroup out of memory: Killed process 39613 (stress-ng-vm) total-vm:69492kB, anon-rss:15484kB, file-rss:648kB, shmem-rss:64kB, UID:0 pgtables:104kB oom_score_adj:1000
...

# If needed, we can remove the group
cgdelete "memory:custom_oom"

```

